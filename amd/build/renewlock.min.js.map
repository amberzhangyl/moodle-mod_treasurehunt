{"version":3,"sources":["../src/renewlock.js"],"names":["define","$","notification","ajax","repeat","lockidTreasure","renewLock","renewLockAjax","treasurehuntid","lockid","json","call","methodname","args","done","response","console","log","status","code","alert","msg","stoprenew_edition_lock","fail","error","exception","renew_edition_lock","renewtime","setInterval","clearInterval","getlockid"],"mappings":"AAuBAA,OAAM,8BAAC,CAAC,QAAD,CAAW,mBAAX,CAAgC,WAAhC,CAAD,CAA+C,SAAUC,CAAV,CAAaC,CAAb,CAA2BC,CAA3B,CAAiC,IAE9EC,CAAAA,CAF8E,CAG9EC,CAH8E,CAI9EC,CAAS,CAAG,CACZC,aAAa,CAAE,uBAAUC,CAAV,CAA0BC,CAA1B,CAAkC,CAC7CJ,CAAc,CAAGI,CAAjB,CACA,GAAIC,CAAAA,CAAI,CAAGP,CAAI,CAACQ,IAAL,CAAU,CAAC,CACdC,UAAU,CAAE,6BADE,CAEdC,IAAI,CAAE,CACFL,cAAc,CAAEA,CADd,CAEFC,MAAM,CAAEA,CAFN,CAFQ,CAAD,CAAV,CAAX,CAOAC,CAAI,CAAC,CAAD,CAAJ,CAAQI,IAAR,CAAa,SAAUC,CAAV,CAAoB,CAC7BC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACA,GAAIA,CAAQ,CAACG,MAAT,CAAgBC,IAApB,CAA0B,CACtBjB,CAAY,CAACkB,KAAb,CAAmB,OAAnB,CAA4BL,CAAQ,CAACG,MAAT,CAAgBG,GAA5C,CAAiD,UAAjD,EACAf,CAAS,CAACgB,sBAAV,EACH,CACJ,CAND,EAMGC,IANH,CAMQ,SAAUC,CAAV,CAAiB,CACrBR,OAAO,CAACC,GAAR,CAAYO,CAAZ,EACAtB,CAAY,CAACuB,SAAb,CAAuBD,CAAvB,EACAlB,CAAS,CAACgB,sBAAV,EACH,CAVD,CAWH,CArBW,CAuBZI,kBAAkB,CAAE,4BAAUlB,CAAV,CAA0BC,CAA1B,CAAkCkB,CAAlC,CAA6C,CAC7DvB,CAAM,CAAGwB,WAAW,CAAC,KAAKrB,aAAN,CAAqBoB,CAArB,CAAgCnB,CAAhC,CAAgDC,CAAhD,CACvB,CAzBW,CA0BZa,sBAAsB,CAAE,iCAAY,CAChCO,aAAa,CAACzB,CAAD,CAChB,CA5BW,CA6BZ0B,SAAS,CAAE,oBAAY,CACnB,MAAOzB,CAAAA,CACV,CA/BW,CAJkE,CAsClF,MAAOC,CAAAA,CACV,CAvCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @module    mod_treasurehunt/renewlock\r\n * @package   mod_treasurehunt\r\n * @copyright 2016 onwards Adrian Rodriguez Fernandez <huorwhisp@gmail.com>\r\n * @author Adrian Rodriguez <huorwhisp@gmail.com>\r\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\ndefine(['jquery', 'core/notification', 'core/ajax'], function ($, notification, ajax) {\r\n\r\n    var repeat;\r\n    var lockidTreasure;\r\n    var renewLock = {\r\n        renewLockAjax: function (treasurehuntid, lockid) {\r\n            lockidTreasure = lockid;\r\n            var json = ajax.call([{\r\n                    methodname: 'mod_treasurehunt_renew_lock',\r\n                    args: {\r\n                        treasurehuntid: treasurehuntid,\r\n                        lockid: lockid\r\n                    }\r\n                }]);\r\n            json[0].done(function (response) {\r\n                console.log(response);\r\n                if (response.status.code) {\r\n                    notification.alert('Error', response.status.msg, 'Continue');\r\n                    renewLock.stoprenew_edition_lock();\r\n                }\r\n            }).fail(function (error) {\r\n                console.log(error);\r\n                notification.exception(error);\r\n                renewLock.stoprenew_edition_lock();\r\n            });\r\n        },\r\n        /**Renuevo de continuo el bloqueo de edicion **/\r\n        renew_edition_lock: function (treasurehuntid, lockid, renewtime) {\r\n            repeat = setInterval(this.renewLockAjax, renewtime, treasurehuntid, lockid);\r\n        },\r\n        stoprenew_edition_lock: function () {\r\n            clearInterval(repeat);\r\n        },\r\n        getlockid: function () {\r\n            return lockidTreasure;\r\n        }\r\n\r\n    };\r\n    return renewLock;\r\n});"],"file":"renewlock.min.js"}